YUI.add("hermes-template-pagination-view",function(a,n){var l=a.Template.Handlebars.revive({1:function(a,n,l,r,e){var t,i=null!=n?n:{};return"\n"+(null!=(t=l.if.call(i,null!=n?n.leftUrl:n,{name:"if",hash:{},fn:a.program(2,e,0),inverse:a.program(4,e,0),data:e}))?t:"")+(null!=(t=l.each.call(i,null!=n?n.pages:n,{name:"each",hash:{},fn:a.program(6,e,0),inverse:a.noop,data:e}))?t:"")+(null!=(t=l.if.call(i,null!=n?n.rightUrl:n,{name:"if",hash:{},fn:a.program(14,e,0),inverse:a.program(16,e,0),data:e}))?t:"")+"\n"},2:function(a,n,l,r,e){var t;return'\t\t<a href="'+a.escapeExpression("function"==typeof(t=null!=(t=l.leftUrl||(null!=n?n.leftUrl:n))?t:l.helperMissing)?t.call(null!=n?n:{},{name:"leftUrl",hash:{},data:e}):t)+'" rel="prev" data-track="paginationLeftClick"><span><i class="page-arrow"></i></span></a>\n'},4:function(a,n,l,r,e){return'\t\t<span class="disabled"><i class="page-arrow"></i></span>\n'},6:function(a,n,l,r,e){var t;return null!=(t=l.if.call(null!=n?n:{},null!=n?n.isMore:n,{name:"if",hash:{},fn:a.program(7,e,0),inverse:a.program(9,e,0),data:e}))?t:""},7:function(a,n,l,r,e){return'\t\t\t<span class="moredots">•••</span>\n'},9:function(a,n,l,r,e){var t,i=a.lambda,s=a.escapeExpression,u=null!=n?n:{};return'\t\t\t<a href="'+s(i(null!=n?n.url:n,n))+'" '+(null!=(t=l.if.call(u,null!=n?n.rel:n,{name:"if",hash:{},fn:a.program(10,e,0),inverse:a.noop,data:e}))?t:"")+' data-track="pagination'+s(i(null!=n?n.text:n,n))+'Click"><span'+(null!=(t=l.if.call(u,null!=n?n.isCurrent:n,{name:"if",hash:{},fn:a.program(12,e,0),inverse:a.noop,data:e}))?t:"")+">"+s(i(null!=n?n.text:n,n))+"</span></a>\n"},10:function(a,n,l,r,e){var t;return"rel='"+a.escapeExpression("function"==typeof(t=null!=(t=l.rel||(null!=n?n.rel:n))?t:l.helperMissing)?t.call(null!=n?n:{},{name:"rel",hash:{},data:e}):t)+"'"},12:function(a,n,l,r,e){return' class="is-current"'},14:function(a,n,l,r,e){var t;return'\t\t<a href="'+a.escapeExpression("function"==typeof(t=null!=(t=l.rightUrl||(null!=n?n.rightUrl:n))?t:l.helperMissing)?t.call(null!=n?n:{},{name:"rightUrl",hash:{},data:e}):t)+'" rel="next" data-track="paginationRightClick"><span><i class="page-arrow right"></i></span></a>\n'},16:function(a,n,l,r,e){return'\t\t<span class="disabled"><i class="page-arrow right"></i></span>\n'},compiler:[7,">= 4.0.0"],main:function(a,n,l,r,e){var t;return null!=(t=l.unless.call(null!=n?n:{},null!=n?n.hide:n,{name:"unless",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?t:""},useData:!0}),r={};a.Array.each([],function(n){var l=a.Template.get("hermes/"+n);l&&(r[n]=l)}),a.Template.register("hermes/pagination-view",function(n,e){return e=e||{},e.partials=e.partials?a.merge(r,e.partials):r,l(n,e)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("pagination-view",function(e){e.namespace("Views")[this.name]=e.Base.create("pagination-view",e.FlickrView,[],{initializer:function(e){return this.modelKey=e.pageParams&&e.pageParams.idAttribute?e[e.pageParams.idAttribute]:e.nsid,this.baseURL=e.baseURL.replace(/\/with\/[0-9]+/,""),this.modelRegistryName=e.modelRegistryName,this.maxNumAttrName=e.maxNumAttrName||"totalItems",this.pageParams=e.pageParams,this.fetchParams=e.fetchParams||{},this.maxResults=e.maxResults||!1,this.paginationSuffix=e.paginationSuffix||"",this.hideMorePages=e.hideMorePages||!1,e.numMaxContiguousPages&&this.set("numMaxContiguousPages",e.numMaxContiguousPages),e.numStartEndPages&&this.set("numStartEndPages",e.numStartEndPages),this.isMobile&&this.set("numMaxContiguousPages",3),""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var e,a=this;return this.appContext.getModel(this.modelRegistryName,this.modelKey,this.fetchParams).then(function(t){a.model=t,a.numPages=Math.ceil(a.model.getValue(a.maxNumAttrName)/a.pageParams.viewPageSize),a.registerEventHandler(a.model.on("valuesChanged",function(t){a.maxResults&&a.model.getValue("totalItems")>a.maxResults&&a.model.setValue("totalItems",a.maxResults),t[a.maxNumAttrName]&&(e=Math.ceil(t[a.maxNumAttrName].newVal/a.pageParams.viewPageSize))!==a.numPages&&(a.numPages=e,a.buildContainer())}))})},buildContainer:function(){var e,a,t,i=[],s=this.baseURL+"page";return t=this.getPaginationURLs(),a=t.nextURL,e=t.prevURL,i=this.calcPages(s,t.getParamsInUrl),this.setContainerWithTemplate("pagination-view",{leftUrl:e,rightUrl:a,pages:i,hide:1===i.length}),this},buildHeadContainer:function(){var e,a,t,i,s="";this.pageParams.nominalPage&&(e=(i=this.getPaginationURLs()).canonicalURL,a=i.nextURL,t=i.prevURL,s+=this.templates("head-link")({rel:"canonical",href:e}),t&&(s+=this.templates("head-link")({rel:"prev",href:t})),a&&(s+=this.templates("head-link")({rel:"next",href:a})),this.set("headContainer",s),YUI.Env.isServer||this.updateHead())},getPaginationURLs:function(){var a,t,i,s,n=this.baseURL;return YUI.Env.isServer?this.paginationSuffix&&(s=this.paginationSuffix):s=e.config.win.location.search,s||(s=""),a=n+s,this.pageParams.nominalPage>1&&this.numPages>1&&(i=n+"page"+(this.pageParams.nominalPage-1).toString()+"/"+s),this.pageParams.nominalPage<this.numPages&&this.numPages>1&&(t=n+"page"+(this.pageParams.nominalPage+1).toString()+"/"+s),{canonicalURL:a,nextURL:t,prevURL:i,getParamsInUrl:s}},activate:function(){return this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handlePageResize.bind(this))),this},handlePageResize:function(){var a,t=e.config.win.innerWidth;this.get("numMaxContiguousPages")!==(a=t<=700?3:7)&&(this.set("numMaxContiguousPages",a),this.buildContainer())},calcPages:function(e,a){function t(t){var i,n=(t+1).toString(),r=s.pageParams.nominalPage===t+1,g=s.pageParams.nominalPage===t;return i=s.pageParams.nominalPage===t+2?"prev":g?"next":null,{url:e+n+a,text:n,isMore:!1,isCurrent:r,rel:i}}var i,s=this,n=[],r=this.get("numMaxContiguousPages"),g=this.get("numStartEndPages");if(this.numPages<=r)for(i=0;i<this.numPages;i++)n.push(t(i));else if(this.pageParams.nominalPage<=r-1){for(i=0;i<r;i++)n.push(t(i));if(!this.hideMorePages)for(this.numPages>r+g&&n.push({isMore:!0}),i=Math.max(r,this.numPages-g);i<this.numPages;i++)n.push(t(i))}else if(this.pageParams.nominalPage>this.numPages-(r-1)){if(!this.hideMorePages){for(i=0;i<Math.min(this.numPages-r,g);i++)n.push(t(i));this.numPages>r+g&&n.push({isMore:!0})}for(i=this.numPages-r;i<this.numPages;i++)n.push(t(i))}else{if(!this.hideMorePages){for(i=0;i<g;i++)n.push(t(i));n.push({isMore:!0})}for(i=this.pageParams.nominalPage-Math.ceil(r/2);i<this.pageParams.nominalPage+Math.floor(r/2);i++)n.push(t(i));if(!this.hideMorePages)for(n.push({isMore:!0}),i=this.numPages-g;i<this.numPages;i++)n.push(t(i))}return n}},{ATTRS:{numMaxContiguousPages:{value:7},numStartEndPages:{value:2}}})},"@VERSION@",{requires:["flickr-view","hermes-template-pagination-view","hermes-template-head-link"],optional:[]});
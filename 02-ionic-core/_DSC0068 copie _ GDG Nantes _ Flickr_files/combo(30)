YUI.add("fluid-magic-slideshow-view",function(i){i.namespace("Views")[this.name]=i.Base.create("fluid-magic-slideshow-view",i.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.nsid=e.nsid,this.modelParams=e.photoListConfig.modelParams,this.pageParams=e.pageParams,this.modelParams.fetchParams&&(this.pageParams=i.merge(this.modelParams.fetchParams,this.pageParams)),this.pageParams.viewPageSize?this.positionMultipler=this.pageParams.viewPageSize:this.positionMultipler=this.pageParams.perPage,this},loadState:function(){var i=this;return this.appContext.getModel(this.modelParams.registryName,this.modelParams.modelIdOrAttributes,this.modelParams.fetchParams).then(function(e){i.position=(i.pageParams.nominalPage-1)*i.positionMultipler||0,i.collection=e.getValue("photoPageList"),i.isEnabled=i.collection.totalItems>0}).catch(function(i){})},buildContainer:function(){return this.setContainerWithTemplate("fluid-magic-slideshow",{isEnabled:this.isEnabled}),this},toggleSlideshow:function(e){i.rapidTracker.beacon(this.name,"launchSlideshow"),e.halt(),new i.Views.Slideshow({appContext:this.appContext,collection:this.collection,pageParams:this.pageParams,position:this.position}).show()},activate:function(){return this.isEnabled&&this.registerEventHandler(this.get("container").one(".slideshow-toggle").on("click",this.toggleSlideshow.bind(this))),this}})},"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-magic-slideshow","slideshow-view"],langBundles:["common"]});YUI.add("album-toolbar-view",function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"fluid-magic-slideshow-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},initializer:function(t){return this.albumId=t.albumId,this.albumPhotoListLayoutStyle=t.albumPhotoListLayoutStyle,this.nsidOrPathAlias=t.nsidOrPathAlias,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return t.appContext.getModel("set-models",t.albumId).then(function(e){t.set("albumModel",e)})},buildContainer:function(){var t=this.get("albumModel"),e=t.id,i=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===t.getValue("owner").id&&(i=!0),this.setContainerWithTemplate("album-toolbar",{nsidOrPathAlias:this.nsidOrPathAlias,viewerIsOwner:i,setId:e,isJustifiedLayout:"justified"===this.albumPhotoListLayoutStyle,isStoryLayout:"story"===this.albumPhotoListLayoutStyle}),this},buildErrorContainer:function(){},activate:function(){var e=this.get("container"),i=this;return this.registerEventHandler(e.all(".layout").on("click",function(a){a.preventDefault();var l=a.target.getAttribute("data-layout");l!==i.layoutStyle&&(e.one(".selected").removeClass("selected"),a.target.addClass("selected"),t.fire("albumToolbarView:layoutChange",l),i.layoutStyle=l)})),this}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-toolbar","fluid-magic-slideshow-view"],optional:[],langBundles:["album-page","common"]});YUI.add("hermes-lang-album-page_fr-fr",function(e,r){e.Intl.add("hermes/album-page","fr-FR",{PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} photo",other:"${#} photos"}}],PUBLIC_PHOTOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} photo publique",other:"${#} photos publiques"}}],PUBLIC_ITEMS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} élément public",other:"${#} éléments publics"}}],VIDEOS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} vidéo",other:"${#} vidéos"}}],VIEWS_COUNT:[{type:"plural",valueName:"selectedCount",options:{one:"${#} vue",other:"${#} vues"}}],BACK_TO_ALBUMS:["Retour à la liste d’albums"],EDIT_IN_ORGANIZR:["Modifier dans Organizr"],EDIT_COVER:["Modifier la couverture"],SELECT_COVER_PHOTO:["Sélectionnez une photo de couverture"],SELECT:["Sélectionner"],ERROR_COVER_PHOTO:["Un problème s'est produit lors de la tentative de définition de la photo de couverture. Veuillez réessayer."],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:["Une erreur s'est produite lors de la mise à jour du titre et de la description de l'album."],ALBUM_ADD_DESCRIPTION:["Cliquez ici pour saisir une description pour cet album"],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:["Un problème s'est produit lors de la création du livre pour cet album. Veuillez réessayer ultérieurement."],ALBUM_DESCRIPTION:["Description de l'album"],CREATE_BOOK_FROM_ALBUM:["Créer un livre à partir de cet album"],DOWNLOAD_PHOTOS_AND_VIDEO:["Télécharger ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," et ",{type:"plural",valueName:"videoCount",options:{one:"${#} vidéo",other:"${#} vidéos"}}],DOWNLOAD_PHOTOS:["Télécharger ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}],DOWNLOAD_VIDEOS:["Télécharger ",{type:"plural",valueName:"videoCount",options:{one:"${#} vidéo",other:"${#} vidéos"}}],DOWNLOAD_ZIP:["Télécharger un fichier zip"],DOWNLOAD_ZIP_PART:["Télécharger un fichier zip partie ","${partSequence}"],ALOT_OF_PHOTOS:["Eh, cela fait beaucoup de photos ! Cliquez pour télécharger chaque lot sous forme de fichier zip."],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:["Cet album ne contient aucune photo ni vidéo que vous pouvez télécharger."],DOWNLOAD_ALBUM_DISABLED_ERROR:["Le téléchargement d'album n'est pas disponible actuellement. Veuillez réessayer dans quelques minutes."],DOWNLOAD_ALBUM_GENERIC_ERROR:["Une erreur s'est produite lors du téléchargement de cet album. Veuillez réessayer."],DOWNLOAD_ALBUM_LICENSE_MESSAGE:["Ces photos peuvent être associées à un ou plusieurs types de licence. Consultez la page de photo individuelle pour en savoir plus sur la licence associée avant de télécharger cet album."],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:["Ces photos peuvent être associées à un ou plusieurs types de licence. Avant de télécharger cet album, consultez les différentes pages de photos pour comprendre le type de licence désigné pour chaque image"],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:["Ces photos sont peut-être associées à un ou plusieurs types de licence, ou leurs droits sont peut-être réservés. Avant de télécharger cet album, consultez les différentes pages de photos pour comprendre le type de licence désigné pour chaque image."],DOWNLOAD_ALBUM_LEARN_MORE:['En savoir plus en accédant à la page <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a>'],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:["Voulez-vous vraiment supprimer cet album ? (Ne vous inquiétez pas, aucun contenu ne sera supprimé.)"],DELETE_THIS_ALBUM:["Supprimer cet album"],SHARE_THIS_ALBUM:["Partager cet album"],CREATE_NEW_ALBUM:["Créer un album"],NEW_ALBUM:["Nouvel album"],NEW_COLLECTION:["Nouveau classeur"],VIEW_COLLECTIONS:["Afficher les classeurs"],VIEW_MY_COLLECTIONS:["Afficher mes classeurs"],SORT:["Trier"],SORT_DATE_TAKEN_OLDEST:["Trier par date de prise de vue (la plus ancienne en premier)"],SORT_DATE_TAKEN_NEWEST:["Trier par date de prise de vue (la plus récente en premier)"],SORT_DATE_UPLOADED_OLDEST:["Trier par date d’envoi au serveur (la plus ancienne en premier)"],SORT_DATE_UPLOADED_NEWEST:["Trier par date d’envoi au serveur (la plus récente en premier)"],SORT_ALPHABETICALLY:["Alphabétique"],SORT_RANDOMLY:["Aléatoire"],SORT_REVERSE:["Ordre actuel inverse"],SORT_ALMOST_DONE:["C’est presque fini..."],TIMEOUT_FAILURE:["Nous ne parvenons pas à afficher cet album actuellement. Veuillez réessayer."],OPENGRAPH_DESCRIPTION:["Découvrez cet album photo de ","${owner}"," sur Flickr !"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-album-header",function(e,a){var t=e.Template.Handlebars.revive({1:function(e,a,t,l,n){var s,i=null!=a?a:{},r=t.helperMissing;return'\t\t<span class="edit-cover-photo" title="'+e.escapeExpression((t.intlMessage||a&&a.intlMessage||r).call(i,{name:"intlMessage",hash:{intlName:"album-page.EDIT_COVER"},data:n}))+'">\n\t\t\t<i></i>\n\t\t</span>\n'+(null!=(s=(t.isFlipped||a&&a.isFlipped||r).call(i,"enable-change-album-sorting",{name:"isFlipped",hash:{},fn:e.program(2,n,0),inverse:e.noop,data:n}))?s:"")},2:function(e,a,t,l,n){var s;return null!=(s=t.if.call(null!=a?a:{},null!=a?a.sortEnabled:a,{name:"if",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?s:""},3:function(e,a,t,l,n){return'\t\t\t\t<span class="change-album-sorting">\n\t\t\t\t\t<span class="label-beta">STAFF</span>\n\t\t\t\t\t'+e.escapeExpression((t.intlMessage||a&&a.intlMessage||t.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"album-page.SORT"},data:n}))+"<i></i>\n\t\t\t\t</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,t,l,n){var s,i,r=null!=a?a:{},u=t.helperMissing,o=e.escapeExpression;return'<div class="album-header-content" style="height: '+o("function"==typeof(i=null!=(i=t.height||(null!=a?a.height:a))?i:u)?i.call(r,{name:"height",hash:{},data:n}):i)+"px; background-image: url("+o("function"==typeof(i=null!=(i=t["cover-photo-url"]||(null!=a?a["cover-photo-url"]:a))?i:u)?i.call(r,{name:"cover-photo-url",hash:{},data:n}):i)+');">\n\n\t<div class="dimming-shim"></div>\n\t<div class="flex-padding"></div>\n\n'+(null!=(s=t.if.call(r,null!=a?a.viewerIsOwner:a,{name:"if",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?s:"")+"\n\t"+o((t.outlet||a&&a.outlet||u).call(r,null!=a?a["album-title-desc-view"]:a,{name:"outlet",hash:{},data:n}))+"\n\t"+o((t.outlet||a&&a.outlet||u).call(r,null!=a?a["album-stats-view"]:a,{name:"outlet",hash:{},data:n}))+"\n\t"+o((t.outlet||a&&a.outlet||u).call(r,null!=a?a["album-engagement-view"]:a,{name:"outlet",hash:{},data:n}))+'\n\t<div class="flex-padding"></div>\n\n\t'+o((t.outlet||a&&a.outlet||u).call(r,null!=a?a["attribution-view"]:a,{name:"outlet",hash:{},data:n}))+"\n</div>\n"},useData:!0}),l={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(l[a]=t)}),e.Template.register("hermes/album-header",function(a,n){return n=n||{},n.partials=n.partials?e.merge(l,n.partials):l,t(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-flickr-balls",function(e,a){var l=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,l,r,s){return'<div class="balls">\n\t<div class="blue ball"></div><div class="pink ball"></div>\n</div>'},useData:!0}),r={};e.Array.each([],function(a){var l=e.Template.get("hermes/"+a);l&&(r[a]=l)}),e.Template.register("hermes/flickr-balls",function(a,s){return s=s||{},s.partials=s.partials?e.merge(r,s.partials):r,l(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-album-title-desc",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,t,l){return"editable"},3:function(e,n,a,t,l){return'\t\t<span class="title-desc-edit" data-action="edit" title="'+e.escapeExpression((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"common.EDIT"},data:l}))+'"></span>\n'},5:function(e,n,a,t,l){return"description-placeholder"},7:function(e,n,a,t,l){return"\t\t\t"+e.escapeExpression((a.renderTrustedMarkup||n&&n.renderTrustedMarkup||a.helperMissing).call(null!=n?n:{},null!=n?n.description:n,{name:"renderTrustedMarkup",hash:{},data:l}))+"\n"},9:function(e,n,a,t,l){var i;return null!=(i=a.if.call(null!=n?n:{},null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(10,l,0),inverse:e.noop,data:l}))?i:""},10:function(e,n,a,t,l){return"\t\t\t\t"+e.escapeExpression((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"album-page.ALBUM_ADD_DESCRIPTION"},data:l}))+"\n"},12:function(e,n,a,t,l){return'\t<button class="done-editing-album-title-desc hidden" data-action="saveAlbumTitleDescEdit">'+e.escapeExpression((a.intlMessage||n&&n.intlMessage||a.helperMissing).call(null!=n?n:{},{name:"intlMessage",hash:{intlName:"common.DONE"},data:l}))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,a,t,l){var i,s,r=null!=n?n:{},d=a.helperMissing,u=e.escapeExpression;return'<div class="title-desc-block '+(null!=(i=a.if.call(r,null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+'">\n\t<div class="'+(null!=(i=a.if.call(r,null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+' album-title">\n\t\t'+u("function"==typeof(s=null!=(s=a.title||(null!=n?n.title:n))?s:d)?s.call(r,{name:"title",hash:{},data:l}):s)+"\n\t</div>\n\n"+(null!=(i=a.if.call(r,null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(3,l,0),inverse:e.noop,data:l}))?i:"")+'\n\t<input type="text" class="meta-field edit-meta-field edit-album-title unfluid" wrap="on"></input>\n\n\t<div class="'+(null!=(i=a.if.call(r,null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+" album-desc "+(null!=(i=a.unless.call(r,null!=n?n.description:n,{name:"unless",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l}))?i:"")+'">\n'+(null!=(i=a.if.call(r,null!=n?n.description:n,{name:"if",hash:{},fn:e.program(7,l,0),inverse:e.program(9,l,0),data:l}))?i:"")+'\t</div>\n\n\t<div class="description-show-more hidden">\n\t\t<span class="description-show-more-link '+(null!=(i=a.if.call(r,null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.noop,data:l}))?i:"")+'" data-action="showMore">\n\t\t\t'+u((a.intlMessage||n&&n.intlMessage||d).call(r,{name:"intlMessage",hash:{intlName:"common.SHOW_MORE"},data:l}))+'\n\t\t</span>\n\t</div>\n\n\t<textarea class="meta-field edit-meta-field edit-album-desc unfluid" wrap="on"></textarea>\n</div>\n\n'+(null!=(i=a.if.call(r,null!=n?n.canEdit:n,{name:"if",hash:{},fn:e.program(12,l,0),inverse:e.noop,data:l}))?i:"")},useData:!0}),t={};e.Array.each([],function(n){var a=e.Template.get("hermes/"+n);a&&(t[n]=a)}),e.Template.register("hermes/album-title-desc",function(n,l){return l=l||{},l.partials=l.partials?e.merge(t,l.partials):t,a(n,l)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("album-title-desc-view",function(e){var t={bigFont:"26px",smallFont:"18px",heightOfOneLineOfTextUsingBigFont:29,maxNumberOfLinesOfDescriptionToShow:2,maxNumberOfLinesOfDescriptionToShowJustified:1,maxNumberOfLinesOfDescriptionToShowInEditField:4,currentDescriptionEditableFieldHeight:29,heightOfOneLineOfTextWhenJustified:29};e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.albumId=e.albumId,this.albumPhotoListLayoutStyle=e.albumPhotoListLayoutStyle,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var e=this;return e.appContext.getModel("set-models",e.albumId).then(function(t){e.set("albumModel",t)})},wrapDescription:function(e){return e=e.split("\n"),e.length>1&&e.forEach(function(e,t,i){i[t]=e+"<br>"}),e.join("")},doneEditingTitleDescription:function(){var i,s,a=this,n=this.get("albumModel"),o=a.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),l=n.getValue("title").trim(),d=n.getValue("description").trim(),r=this.get("container"),c=r.one(".album-desc"),h=r.one(".album-title"),u=r.one(".edit-album-desc"),m=r.one(".edit-album-title"),g=r.one(".done-editing-album-title-desc");r.removeClass("editing"),""===(i=m.get("value").trim())&&(i=l),s=u.get("value")!==o?u.get("value").trim():"",g.addClass("hidden"),a.fire("subviewViewEvent","albumTitleDesc:doneEditing"),i!==l||s!==d?(n.setValue("title",i),n.setValue("description",s),e.rapidTracker.beacon(a.name,"albumTitleDescriptionSave"),n.remoteUpdate().then(function(){var e=n.getValue("title"),i=n.getValue("description");h.set("text",e),""!==i.trim()?(c.removeClass("description-placeholder"),i=a.wrapDescription(i),c.setHTML(i)):(c.addClass("description-placeholder"),c.setHTML(o)),m.removeClass("show-editable"),u.removeClass("show-editable"),h.removeClass("hidden"),c.removeClass("hidden"),r.hasClass("justified")?a.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):a.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)},function(e){n.setValue("title",l),n.setValue("description",d),h.set("text",l),""!==d.trim()?(c.removeClass("description-placeholder"),c.setHTML(d)):(c.addClass("description-placeholder"),c.setHTML(o)),m.removeClass("show-editable"),u.removeClass("show-editable"),h.removeClass("hidden"),c.removeClass("hidden"),r.hasClass("justified")?a.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):a.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),a.onError(a.intlMessage({intlName:"album-page.ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION"}))})):(m.removeClass("show-editable"),u.removeClass("show-editable"),h.removeClass("hidden"),""===s.trim()?(c.addClass("description-placeholder"),c.setHTML(o)):(s=a.wrapDescription(s),c.removeClass("description-placeholder"),c.setHTML(s)),c.removeClass("hidden"),r.hasClass("justified")?a.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):a.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow)),r.hasClass("justified")&&t.currentDescriptionEditableFieldHeight!==t.heightOfOneLineOfTextWhenJustified&&(a.fire("subviewViewEvent","albumTitleDescEditing:heightChange",t.heightOfOneLineOfTextWhenJustified-t.currentDescriptionEditableFieldHeight),t.currentDescriptionEditableFieldHeight=t.heightOfOneLineOfTextWhenJustified)},editTitleDescription:function(t){var i,s,a=this.get("container"),n=this.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),o=a.one(".album-title"),l=a.one(".edit-album-desc"),d=a.one(".edit-album-title"),r=this.get("albumModel"),c=r.getValue("title"),h=r.getValue("description").trim(),u=a.one(".description-show-more"),m=a.one(".done-editing-album-title-desc");(t.target.hasClass("editable album-title")||t.target.hasClass("editable album-desc")||t.target.ancestor().hasClass("editable album-desc")||t.target.hasClass("title-desc-edit")||t.target.hasClass("description-show-more-link editable")||t.target.hasClass("title-desc-block editable"))&&"a"!==t.target.get("tagName").toLowerCase()&&(t.preventDefault(),t.stopPropagation(),a.addClass("editing"),u.addClass("hidden"),this.fire("subviewViewEvent","albumTitleDesc:editing"),m.removeClass("hidden"),i=o.getXY(),d.set("value",c),d.setStyle("height",o.get("offsetHeight")),d.setStyle("width",o.get("offsetWidth")),d.setStyle("left",i[0]),d.setStyle("top",i[1]),o.addClass("hidden"),d.addClass("show-editable"),h?(s=h.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<"),l.removeClass("description-placeholder")):(s=n,l.addClass("description-placeholder")),l.set("value",s),this.makeDescriptionEditFieldResponsive(),t.target.hasClass("editable album-title")?d.focus():l.focus(),e.rapidTracker.beacon(this.name,"albumTitleDescriptionEdit"))},makeDescriptionEditFieldResponsive:function(){var e,i,s,a,n,o=this.get("container"),l=o.one(".album-desc"),d=o.one(".edit-album-desc"),r=d.get("value"),c=!1;o.hasClass("justified")&&(c=!0),r?(r=r.replace(/"/g,"&quot;").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=this.wrapDescription(r),l.addClass("calculating").removeClass("hidden"),l.setHTML(r),(i=parseInt(l.getComputedStyle("height"),10))>t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField?d.setStyle("height",t.heightOfOneLineOfTextUsingBigFont*t.maxNumberOfLinesOfDescriptionToShowInEditField):d.setStyle("height",i),c&&(n=parseInt(d.getComputedStyle("height"),10))!==t.currentDescriptionEditableFieldHeight&&(e=n-t.currentDescriptionEditableFieldHeight,this.fire("subviewViewEvent","albumTitleDescEditing:heightChange",e),t.currentDescriptionEditableFieldHeight=n),s=l.get("offsetWidth"),a=l.getXY(),d.setStyle("width",s),d.setStyle("left",a[0]),d.setStyle("top",a[1]),l.addClass("hidden").removeClass("calculating"),d.addClass("show-editable")):(d.setStyle("height",t.heightOfOneLineOfTextUsingBigFont),l.addClass("hidden").removeClass("calculating"))},displayShowMoreIfNeeded:function(e){var i,s=this.get("container"),a=s.one(".album-desc"),n=s.one(".title-desc-block"),o=s.one(".description-show-more");a&&((i=a.cloneNode(!0)).removeClass("album-desc"),i.addClass("album-desc-calculator"),n.append(i),parseInt(i.getComputedStyle("height"),10)>t.heightOfOneLineOfTextUsingBigFont*e?o.removeClass("hidden"):o.addClass("hidden"),i.remove(!0))},showMoreClick:function(t){var i=this.get("albumModel").getValue("description"),s=this.get("container").one(".description-show-more");i=this.wrapDescription(i),t.target.hasClass("editable")?(s.addClass("hidden"),this.editTitleDescription(t)):new e.Views.FluidModal({appContext:this.appContext,title:this.intlMessage({intlName:"album-page.ALBUM_DESCRIPTION"}),message:i,actionButtonLabel:this.intlMessage({intlName:"common.OK"}),showCancelButton:!1,classList:"album-full-description"}).show()},buildContainer:function(){var e=this.get("albumModel"),t=e.getValue("title"),i=e.getValue("description"),s=e.getValue("isAutoUploadSet"),a=!1,n=!1,o=this.get("container");return""!==i.trim()&&(n=!0,"justified"===this.albumPhotoListLayoutStyle&&o.addClass("justified"),i=this.wrapDescription(i)),this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===e.getValue("owner").id&&!s&&(a=!0),this.setContainerWithTemplate("album-title-desc",{title:t,description:i,hasDescription:n,canEdit:a}),this},buildErrorContainer:function(){},activate:function(){var i=this,s=this.get("albumModel"),a=this.get("container"),n=i.intlMessage({intlName:"album-page.ALBUM_ADD_DESCRIPTION"}),o=a.one(".title-desc-block"),l=a.one(".edit-album-title"),d=a.one(".edit-album-desc"),r=a.one(".title-desc-edit"),c=a.one(".description-show-more-link"),h=!1;return this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===s.getValue("owner").id&&(h=!0),a.hasClass("justified")?i.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified):i.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow),h&&!s.getValue("isAutoUploadSet")&&(i.registerEventHandler(o.on("click",function(e){i.editTitleDescription(e)},o)),i.registerEventHandler(r.on("click",function(e){i.editTitleDescription(e)},r))),i.registerEventHandler(c.on("click",function(e){i.showMoreClick(e)},c)),this.registerEventHandler(l.on("keyup",function(e){13===e.keyCode&&i.doneEditingTitleDescription()},this)),this.registerEventHandler(l.on("blur",function(t){setTimeout(function(){try{e.config.doc.activeElement.isEqualNode(l.getDOMNode())||e.config.doc.activeElement.classList.contains("edit-album-desc")||i.doneEditingTitleDescription()}catch(e){}},1,l)},this)),this.registerEventHandler(d.on("keyup",function(e){i.makeDescriptionEditFieldResponsive()},this)),this.registerEventHandler(d.on("blur",function(t){""===d.get("value").trim()?(d.addClass("description-placeholder"),d.set("value",n)):d.removeClass("description-placeholder"),setTimeout(function(){try{e.config.doc.activeElement.isEqualNode(d.getDOMNode())||e.config.doc.activeElement.classList.contains("edit-album-title")||i.doneEditingTitleDescription()}catch(e){}},1,d)},this)),this.registerEventHandler(d.on("focus",function(){d.get("value").trim()===n&&(d.removeClass("description-placeholder"),d.set("value",""))},this)),e.on("albumToolbarView:layoutChange",function(e){"justified"===e?(a.addClass("justified"),i.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShowJustified)):(a.removeClass("justified"),i.displayShowMoreIfNeeded(t.maxNumberOfLinesOfDescriptionToShow))}),this},onError:function(t){return this.errorDialog=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelButton:!1,title:this.intlMessage({intlName:"common.OOPS"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),message:t,darkOverlay:!0}),this.errorDialog.show(),this.errorDialog}})},"@VERSION@",{requires:["flickr-view","hermes-template-album-title-desc","handlebars-helpers"],optional:[],langBundles:["common","album-page"]});YUI.add("hermes-template-album-stats",function(e,a){var s=e.Template.Handlebars.revive({1:function(e,a,s,n,t){return'\t\t<span class="photo-counts">'+e.escapeExpression((s.intlMessage||a&&a.intlMessage||s.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{selectedCount:null!=a?a.photosArePresent:a,intlName:"album-page.PHOTOS_COUNT"},data:t}))+"</span>\n"},3:function(e,a,s,n,t){var l,r=null!=a?a:{};return(null!=(l=s.if.call(r,null!=a?a.photosArePresent:a,{name:"if",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t}))?l:"")+'\t\t<span class="video-counts">'+e.escapeExpression((s.intlMessage||a&&a.intlMessage||s.helperMissing).call(r,{name:"intlMessage",hash:{selectedCount:null!=a?a.videosArePresent:a,intlName:"album-page.VIDEOS_COUNT"},data:t}))+"</span>\n"},4:function(e,a,s,n,t){return'\t\t\t<span class="album-stats-separator">&middot;</span>\n'},6:function(e,a,s,n,t){return'\t\t<span class="album-stats-separator">&middot;</span>\n\t\t<span class="view-counts">'+e.escapeExpression((s.intlMessage||a&&a.intlMessage||s.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{selectedCount:null!=a?a.viewsArePresent:a,intlName:"album-page.VIEWS_COUNT"},data:t}))+"</span>\n"},compiler:[7,">= 4.0.0"],main:function(e,a,s,n,t){var l,r=null!=a?a:{};return'<div class="stats-container">\n'+(null!=(l=s.if.call(r,null!=a?a.photosArePresent:a,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t}))?l:"")+(null!=(l=s.if.call(r,null!=a?a.videosArePresent:a,{name:"if",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t}))?l:"")+(null!=(l=s.if.call(r,null!=a?a.viewsArePresent:a,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t}))?l:"")+"</div>\n"},useData:!0}),n={};e.Array.each([],function(a){var s=e.Template.get("hermes/"+a);s&&(n[a]=s)}),e.Template.register("hermes/album-stats",function(a,t){return t=t||{},t.partials=t.partials?e.merge(n,t.partials):n,s(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});